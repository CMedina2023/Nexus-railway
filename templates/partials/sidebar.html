<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">N</div>
        <div class="sidebar-brand">
            <h1>Nexus AI</h1>
            <p>Hub de Herramientas</p>
        </div>
    </div>
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar" style="flex-shrink: 0;">
        <i class="fas fa-chevron-left"></i>
    </button>
    <nav class="sidebar-nav" style="flex: 1; overflow-y: auto;">
        <!-- MENU Section -->
        <div class="nav-section">
            <div class="nav-section-title">MENU</div>

            <a href="#" class="nav-item" data-section="dashboard" data-route="/dashboard">
                <span class="nav-icon"><i class="fas fa-home"></i></span>
                <span class="nav-text">Dashboard</span>
            </a>
        </div>

        <!-- GENERADORES Section -->
        <div class="nav-section">
            <div class="nav-section-title">GENERADORES</div>

            <a href="#" class="nav-item" data-section="crear-historias">
                <span class="nav-icon"><i class="fas fa-file-alt"></i></span>
                <span class="nav-text">Crear Historias</span>
            </a>

            <a href="#" class="nav-item" data-section="crear-casos-prueba">
                <span class="nav-icon"><i class="fas fa-vial"></i></span>
                <span class="nav-text">Crear Casos de Prueba</span>
            </a>
        </div>

        <!-- MÉTRICAS Section -->
        <div class="nav-section">
            <div class="nav-section-title">MÉTRICAS</div>

            <a href="#" class="nav-item" data-section="metricas" data-route="/agente-ai/metricas">
                <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
                <span class="nav-text">Métricas</span>
            </a>

            <a href="#" class="nav-item" data-section="roadmap" data-route="/agente-ai/roadmap">
                <span class="nav-icon"><i class="fas fa-map-signs"></i></span>
                <span class="nav-text">Roadmap</span>
            </a>
        </div>

        <!-- JIRA Section -->
        <div class="nav-section">
            <div class="nav-section-title">JIRA</div>

            <a href="#" class="nav-item" data-section="jira-reportes" data-route="/jira/reportes">
                <span class="nav-icon"><i class="fas fa-file-alt"></i></span>
                <span class="nav-text">Reportes</span>
            </a>

            <a href="#" class="nav-item" data-section="jira-carga-masiva" data-route="/jira/carga-masiva">
                <span class="nav-icon"><i class="fas fa-upload"></i></span>
                <span class="nav-text">Carga Masiva</span>
            </a>
        </div>

        <!-- Q-ACADEMY Section (Analistas QA & Admin) -->
        {% if user_info and user_info.role in ['admin', 'analista_qa', 'Analista QA'] %}
        <div class="nav-section">
            <div class="nav-section-title">Q-ACADEMY</div>

            <a href="#" class="nav-item" data-section="q-academy">
                <span class="nav-icon"><i class="fas fa-graduation-cap"></i></span>
                <span class="nav-text">Mi Aprendizaje</span>
            </a>

            <a href="#" class="nav-item" data-section="q-academy">
                <span class="nav-icon"><i class="fas fa-robot"></i></span>
                <span class="nav-text">Automatización</span>
            </a>

            <a href="#" class="nav-item" data-section="q-academy">
                <span class="nav-icon"><i class="fas fa-tachometer-alt"></i></span>
                <span class="nav-text">Performance</span>
            </a>

            <a href="#" class="nav-item" data-section="q-academy">
                <span class="nav-icon"><i class="fas fa-hand-paper"></i></span>
                <span class="nav-text">Pruebas Manuales</span>
            </a>
        </div>
        {% endif %}

        <!-- SOPORTE Section -->
        <div class="nav-section">
            <div class="nav-section-title">SOPORTE</div>

            <a href="#" class="nav-item" data-section="feedback" data-route="/feedback">
                <span class="nav-icon"><i class="fas fa-comment-dots"></i></span>
                <span class="nav-text">Feedback</span>
            </a>
        </div>

        <!-- ADMINISTRACIÓN Section (solo para admins) -->
        {% if user_info and user_info.role == 'admin' %}
        <div class="nav-section">
            <div class="nav-section-title">ADMINISTRACIÓN</div>

            <a href="#" class="nav-item" data-section="admin">
                <span class="nav-icon"><i class="fas fa-shield-alt"></i></span>
                <span class="nav-text">Panel Admin</span>
            </a>
        </div>
        {% endif %}
    </nav>

    <!-- User Info Section (al final del sidebar) -->
    {% if user_info %}
    <div class="sidebar-user-info">
        <div class="user-avatar">
            {{ user_info.email[0].upper() }}
        </div>
        <div class="user-details">
            <div class="user-email" title="{{ user_info.email }}">
                {{ user_info.email }}
            </div>
            <div class="user-role {{ user_info.role }}">
                <i class="fas fa-user-shield" style="font-size: 0.6rem;"></i>
                {{ user_info.role }}
            </div>
        </div>
        <a href="/auth/logout" class="user-logout" title="Cerrar sesión">
            <span class="sidebar-expanded-only">Cerrar sesión</span>
            <span class="sidebar-collapsed-only"><i class="fas fa-sign-out-alt"></i></span>
        </a>
    </div>
    {% else %}
    <div class="sidebar-user-info">
        <a href="/auth/login" class="user-logout"
            style="background: rgba(59, 130, 246, 0.1); border-color: rgba(59, 130, 246, 0.2); color: var(--accent);">
            <span class="sidebar-expanded-only">Iniciar sesión</span>
            <span class="sidebar-collapsed-only"><i class="fas fa-sign-in-alt"></i></span>
        </a>
    </div>
    {% endif %}
</aside>